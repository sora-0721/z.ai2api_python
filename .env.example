# Z.AI API 代理服务配置文件示例
# 复制此文件为 .env 并根据需要修改配置值

# ========== API 基础配置 ==========
# Z.ai API 端点地址
API_ENDPOINT=https://chat.z.ai/api/chat/completions

# 客户端认证密钥（您自定义的 API 密钥，用于客户端访问本服务）
AUTH_TOKEN=sk-your-api-key

# 跳过客户端认证（仅开发环境使用）
SKIP_AUTH_TOKEN=false

# ========== Token池配置 ==========
# Token失败阈值（失败多少次后标记为不可用）
TOKEN_FAILURE_THRESHOLD=3

# Token恢复超时时间（秒，失败token在此时间后重新尝试）
TOKEN_RECOVERY_TIMEOUT=1800

# Token健康检查间隔（秒，定期检查token状态）
TOKEN_HEALTH_CHECK_INTERVAL=300

# Z.ai 认证token配置（当匿名模式失败时使用）
#
# 使用独立的token文件配置
# 在项目根目录创建 tokens.txt 文件，每行一个token或逗号分隔
AUTH_TOKENS_FILE=tokens.txt

# ========== 服务器配置 ==========
# 服务监听端口
LISTEN_PORT=8080

# 调试日志
DEBUG_LOGGING=true

# 匿名用户模式
# false: 使用认证用户令牌
# true: 自动从 Z.ai 获取临时访问令牌，避免对话历史共享
ANONYMOUS_MODE=true

# Function Call 功能开关
TOOL_SUPPORT=true

# 工具调用扫描限制（字符数）
SCAN_LIMIT=200000

# ========== 错误码400处理 ==========

# 重试次数
MAX_RETRIES=5
# 初始重试延迟
RETRY_DELAY=1
# 退避系数
RETRY_BACKOFF=2